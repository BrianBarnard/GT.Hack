{
  "swagger" : "2.0",
  "info" : {
    "version" : "2.0.0-M1",
    "title" : "tdm",
    "contact" : {
      "name" : ""
    },
    "license" : {
      "name" : "",
      "url" : ""
    }
  },
  "basePath" : "/transaction-document",
  "tags" : [ {
    "name" : "/transaction-document",
    "description" : "Service API for TDM Document handling."
  } ],
  "paths" : {
    "/audit-entries" : {
      "get" : {
        "tags" : [ "audit-entries" ],
        "operationId" : "auditLookup",
        "consumes" : [ "application/json" ],
        "produces" : [ "application/json" ],
        "parameters" : [ {
          "name" : "dt",
          "in" : "path",
          "required" : true,
          "type" : "string",
          "format" : "date-time"
        } ],
        "responses" : {
          "200" : {
            "description" : "Success",
            "schema" : {
              "$ref" : "#/definitions/AuditStatus"
            }
          },
          "400" : {
            "description" : "Bad Request: The request is invalid"
          },
          "401" : {
            "description" : "Unauthorized:  The request requires user authentication."
          },
          "404" : {
            "description" : "Not found:  The document was not found."
          },
          "500" : {
            "description" : "Server error"
          },
          "503" : {
            "description" : "Service unavailable"
          }
        }
      }
    },
    "/transaction-documents" : {
      "post" : {
        "tags" : [ "/transaction-document" ],
        "operationId" : "saveAny",
        "consumes" : [ "*/*" ],
        "parameters" : [ {
          "name" : "providerName",
          "in" : "query",
          "required" : false,
          "type" : "string"
        }, {
          "name" : "providerVersion",
          "in" : "query",
          "required" : false,
          "type" : "string"
        } ],
        "responses" : {
          "default" : { }
        }
      }
    },
    "/transaction-documents/find" : {
      "post" : {
        "tags" : [ "/transaction-document" ],
        "summary" : "Finds TDM documents matching the specified criteria and filter the results.\r\n\r\n param queryFilter The class containing the fields to filter the results by in JSON Pointer format. If empty or\r\n null, then the results should still contain valid CanonicalTLogIdData fields via inherited fields.",
        "operationId" : "findByQueryCriteria",
        "parameters" : [ {
          "in" : "body",
          "name" : "body",
          "description" : "The class containing the fields to search by.",
          "required" : false,
          "schema" : {
            "$ref" : "#/definitions/FindTLogRequest"
          }
        } ],
        "responses" : {
          "200" : {
            "description" : "response object containing a page of search results",
            "schema" : {
              "$ref" : "#/definitions/FindWithQueryResponse"
            }
          },
          "400" : {
            "description" : "Bad Request: The request is invalid"
          },
          "401" : {
            "description" : "Unauthorized:  The request requires user authentication."
          },
          "404" : {
            "description" : "No documents found"
          },
          "500" : {
            "description" : "Server error"
          },
          "503" : {
            "description" : "Service unavailable"
          }
        }
      }
    },
    "/transaction-documents/find/count" : {
      "post" : {
        "tags" : [ "/transaction-document" ],
        "summary" : "Finds TDM documents matching the specified criteria and returns the count.",
        "operationId" : "getCountByCriteria",
        "parameters" : [ {
          "in" : "body",
          "name" : "body",
          "description" : "request the search criteria",
          "required" : false,
          "schema" : {
            "$ref" : "#/definitions/FindTLogRequest"
          }
        } ],
        "responses" : {
          "200" : {
            "description" : "response object containing the document count.",
            "schema" : {
              "$ref" : "#/definitions/TLogCountResponse"
            }
          },
          "400" : {
            "description" : "Bad Request: The request is invalid"
          },
          "401" : {
            "description" : "Unauthorized:  The request requires user authentication."
          },
          "404" : {
            "description" : "No documents found"
          },
          "500" : {
            "description" : "Server error"
          },
          "503" : {
            "description" : "Service unavailable"
          }
        }
      }
    },
    "/transaction-documents/{id}" : {
      "get" : {
        "tags" : [ "/transaction-document" ],
        "summary" : "Finds and returns a TLog by id in one of several forms.",
        "operationId" : "findCanonicalTlogsById",
        "parameters" : [ {
          "name" : "id",
          "in" : "path",
          "description" : "The id of the TLog.",
          "required" : true,
          "type" : "string"
        }, {
          "name" : "Accept",
          "in" : "header",
          "description" : "tlog/raw returns a String with the appropriate Content-Type (text/plain, text/xml, text/html,\r\n application/json, etc.) Note that pure binary, application/octet-stream, is not supported. tlog/canonical returns\r\n a CanonicalTLogData response. Content-Type will be application/json tlog/image returns receipt image as String\r\n with the Content-Type set to text/html",
          "required" : false,
          "type" : "string"
        } ],
        "responses" : {
          "200" : {
            "description" : "response object containing the result"
          },
          "400" : {
            "description" : "Bad Request: The request is invalid"
          },
          "401" : {
            "description" : "Unauthorized:  The request requires user authentication."
          },
          "404" : {
            "description" : "Not found:  The document was not found."
          },
          "500" : {
            "description" : "Server error"
          },
          "503" : {
            "description" : "Service unavailable"
          }
        }
      }
    },
    "/transaction-documents/{id}/linked-documents" : {
      "post" : {
        "tags" : [ "/transaction-document" ],
        "summary" : "Returns the documents (TLogs) linked to a specific document (TLog).",
        "operationId" : "getLinkedCanonicalDocuments",
        "parameters" : [ {
          "name" : "pageNumber",
          "in" : "query",
          "description" : "The Id and type of the TLog for which to return linked documents.",
          "required" : false,
          "type" : "integer",
          "default" : 0,
          "maximum" : 214748.0,
          "minimum" : 0.0,
          "format" : "int32"
        }, {
          "name" : "pageSize",
          "in" : "query",
          "required" : false,
          "type" : "integer",
          "default" : 200,
          "maximum" : 10000.0,
          "minimum" : 10.0,
          "format" : "int32"
        }, {
          "name" : "id",
          "in" : "path",
          "required" : true,
          "type" : "string"
        } ],
        "responses" : {
          "200" : {
            "description" : "matching canonical tlogs"
          },
          "400" : {
            "description" : "Bad Request: The request is invalid"
          },
          "401" : {
            "description" : "Unauthorized:  The request requires user authentication."
          },
          "404" : {
            "description" : "Not found:  The document was not found."
          },
          "500" : {
            "description" : "Server error"
          },
          "503" : {
            "description" : "Service unavailable"
          }
        }
      }
    },
    "/transaction-documents/{id}/linked-documents/raw" : {
      "post" : {
        "tags" : [ "/transaction-document" ],
        "summary" : "Returns the _raw_ tlogs linked to a specific document (TLog).",
        "operationId" : "getLinkedRawDocuments",
        "parameters" : [ {
          "name" : "pageNumber",
          "in" : "query",
          "description" : "The Id and type of the TLog for which to return linked documents.",
          "required" : false,
          "type" : "integer",
          "default" : 0,
          "maximum" : 214748.0,
          "minimum" : 0.0,
          "format" : "int32"
        }, {
          "name" : "pageSize",
          "in" : "query",
          "required" : false,
          "type" : "integer",
          "default" : 200,
          "maximum" : 10000.0,
          "minimum" : 10.0,
          "format" : "int32"
        }, {
          "name" : "id",
          "in" : "path",
          "required" : true,
          "type" : "string"
        } ],
        "responses" : {
          "200" : {
            "description" : "matching raw tlogs"
          },
          "400" : {
            "description" : "Bad Request: The request is invalid"
          },
          "401" : {
            "description" : "Unauthorized:  The request requires user authentication."
          },
          "404" : {
            "description" : "Not found:  The document was not found."
          },
          "500" : {
            "description" : "Server error"
          },
          "503" : {
            "description" : "Service unavailable"
          }
        }
      }
    },
    "/transaction-documents/{id}/raw" : {
      "get" : {
        "tags" : [ "/transaction-document" ],
        "summary" : "Finds and returns a TLog by id in one of several forms.",
        "operationId" : "findRawTlogsById",
        "parameters" : [ {
          "name" : "id",
          "in" : "path",
          "description" : "The id of the TLog.",
          "required" : true,
          "type" : "string"
        }, {
          "name" : "Accept",
          "in" : "header",
          "description" : "tlog/raw returns a String with the appropriate Content-Type (text/plain, text/xml, text/html,\r\n application/json, etc.) Note that pure binary, application/octet-stream, is not supported. tlog/canonical returns\r\n a CanonicalTLogData response. Content-Type will be application/json tlog/image returns receipt image as String\r\n with the Content-Type set to text/html",
          "required" : false,
          "type" : "string"
        } ],
        "responses" : {
          "200" : {
            "description" : "response object containing the result"
          },
          "400" : {
            "description" : "Bad Request: The request is invalid"
          },
          "401" : {
            "description" : "Unauthorized:  The request requires user authentication."
          },
          "404" : {
            "description" : "Not found:  The document was not found."
          },
          "500" : {
            "description" : "Server error"
          },
          "503" : {
            "description" : "Service unavailable"
          }
        }
      }
    }
  },
  "definitions" : {
    "ZoneOffsetTransitionRule" : {
      "type" : "object",
      "properties" : {
        "month" : {
          "type" : "string",
          "enum" : [ "JANUARY", "FEBRUARY", "MARCH", "APRIL", "MAY", "JUNE", "JULY", "AUGUST", "SEPTEMBER", "OCTOBER", "NOVEMBER", "DECEMBER" ]
        },
        "timeDefinition" : {
          "type" : "string",
          "enum" : [ "UTC", "WALL", "STANDARD" ]
        },
        "standardOffset" : {
          "$ref" : "#/definitions/ZoneOffset"
        },
        "offsetBefore" : {
          "$ref" : "#/definitions/ZoneOffset"
        },
        "offsetAfter" : {
          "$ref" : "#/definitions/ZoneOffset"
        },
        "dayOfMonthIndicator" : {
          "type" : "integer",
          "format" : "int32"
        },
        "localTime" : {
          "$ref" : "#/definitions/LocalTime"
        },
        "midnightEndOfDay" : {
          "type" : "boolean",
          "default" : false
        },
        "dayOfWeek" : {
          "type" : "string",
          "enum" : [ "MONDAY", "TUESDAY", "WEDNESDAY", "THURSDAY", "FRIDAY", "SATURDAY", "SUNDAY" ]
        }
      }
    },
    "SiteInfo" : {
      "type" : "object",
      "required" : [ "id" ],
      "properties" : {
        "euId" : {
          "type" : "string"
        },
        "name" : {
          "type" : "string"
        },
        "id" : {
          "type" : "string"
        },
        "siteTimeZone" : {
          "$ref" : "#/definitions/TimeZoneInfo"
        }
      }
    },
    "CanonicalTLogDataObject" : {
      "type" : "object",
      "required" : [ "closeDateTimeUTC", "id", "transactionNumber" ],
      "properties" : {
        "id" : {
          "type" : "string"
        },
        "modelVersion" : {
          "type" : "integer",
          "format" : "int32"
        },
        "siteInfo" : {
          "$ref" : "#/definitions/SiteInfo"
        },
        "transactionNumber" : {
          "type" : "string"
        },
        "openDateTimeUTC" : {
          "$ref" : "#/definitions/DateTimeInfo"
        },
        "documentExpirationDate" : {
          "$ref" : "#/definitions/DateTimeInfo"
        },
        "closeDateTimeUTC" : {
          "$ref" : "#/definitions/DateTimeInfo"
        },
        "touchPointId" : {
          "type" : "string"
        },
        "configurationDateTimeUtc" : {
          "$ref" : "#/definitions/DateTimeInfo"
        },
        "touchPointType" : {
          "type" : "string"
        },
        "touchPointGroup" : {
          "type" : "string"
        },
        "dataProviderName" : {
          "type" : "string"
        },
        "dataProviderVersion" : {
          "type" : "string"
        },
        "businessDay" : {
          "$ref" : "#/definitions/DateTimeInfo"
        },
        "isTrainingMode" : {
          "type" : "boolean",
          "default" : false
        },
        "linkedTransactionIds" : {
          "type" : "array",
          "items" : {
            "type" : "string"
          }
        },
        "tlog" : {
          "type" : "object",
          "properties" : { }
        },
        "transactionCategory" : {
          "type" : "string"
        }
      }
    },
    "TLogCountResponse" : {
      "type" : "object",
      "properties" : {
        "count" : {
          "type" : "integer",
          "format" : "int64"
        }
      }
    },
    "MoneyInfo" : {
      "type" : "object",
      "properties" : {
        "amount" : {
          "type" : "number"
        }
      }
    },
    "LocalTime" : {
      "type" : "object",
      "properties" : {
        "hour" : {
          "type" : "integer",
          "format" : "int32"
        },
        "minute" : {
          "type" : "integer",
          "format" : "int32"
        },
        "second" : {
          "type" : "integer",
          "format" : "int32"
        },
        "nano" : {
          "type" : "integer",
          "format" : "int32"
        }
      }
    },
    "ZoneId" : {
      "type" : "object",
      "properties" : {
        "rules" : {
          "$ref" : "#/definitions/ZoneRules"
        },
        "id" : {
          "type" : "string"
        }
      }
    },
    "TimeZoneInfo" : {
      "type" : "object",
      "properties" : {
        "timeZone" : {
          "$ref" : "#/definitions/ZoneId"
        }
      }
    },
    "InputStream" : {
      "type" : "object"
    },
    "LinkedRawTLogContentResponse" : {
      "type" : "object",
      "properties" : {
        "lastPage" : {
          "type" : "boolean",
          "default" : false
        },
        "pageNumber" : {
          "type" : "integer",
          "format" : "int32"
        },
        "totalPages" : {
          "type" : "integer",
          "format" : "int64",
          "minimum" : 0.0
        },
        "totalResults" : {
          "type" : "integer",
          "format" : "int64",
          "minimum" : 0.0
        },
        "pageContent" : {
          "type" : "array",
          "items" : {
            "type" : "string"
          }
        }
      }
    },
    "TLogInfo" : {
      "type" : "object",
      "required" : [ "id" ],
      "properties" : {
        "id" : {
          "type" : "string"
        },
        "results" : {
          "type" : "array",
          "items" : {
            "$ref" : "#/definitions/KeyValueData"
          }
        }
      }
    },
    "DateTimeInfo" : {
      "type" : "object",
      "properties" : {
        "dateTime" : {
          "type" : "string",
          "format" : "date-time"
        }
      }
    },
    "FindTLogRequest" : {
      "type" : "object",
      "properties" : {
        "pageNumber" : {
          "type" : "integer",
          "format" : "int32",
          "minimum" : 0.0,
          "maximum" : 214748.0,
          "default" : 0
        },
        "pageSize" : {
          "type" : "integer",
          "format" : "int32",
          "minimum" : 10.0,
          "maximum" : 10000.0,
          "default" : 200
        },
        "returnedFields" : {
          "type" : "array",
          "items" : {
            "type" : "string"
          }
        },
        "id" : {
          "type" : "string"
        },
        "tenantId" : {
          "type" : "string"
        },
        "euId" : {
          "type" : "string"
        },
        "receiptId" : {
          "type" : "string"
        },
        "transactionNumber" : {
          "type" : "string"
        },
        "siteInfoId" : {
          "type" : "string"
        },
        "fromTransactionDateTimeUTC" : {
          "$ref" : "#/definitions/DateTimeInfo"
        },
        "toTransactionDateTimeUTC" : {
          "$ref" : "#/definitions/DateTimeInfo"
        },
        "businessDay" : {
          "$ref" : "#/definitions/DateTimeInfo"
        },
        "endTransactionDateTimeUTC" : {
          "$ref" : "#/definitions/DateTimeInfo"
        },
        "touchPointId" : {
          "type" : "string"
        },
        "transactionCategory" : {
          "type" : "string"
        },
        "isTrainingMode" : {
          "type" : "boolean",
          "default" : false
        },
        "employeeId" : {
          "type" : "string"
        },
        "employeeName" : {
          "type" : "string"
        },
        "businessActivities" : {
          "type" : "array",
          "items" : {
            "type" : "string",
            "enum" : [ "SIGN_ON", "SIGN_OFF", "INVALID_PASSWORD", "CHANGE_PASSWORD", "RESET_PASSWORD", "TERMINAL_LOCK", "TERMINAL_UNLOCK", "DRAWER_OPEN", "END_OF_DAY", "TERMINAL_UP", "TERMINAL_DOWN", "SECURITY_ID_ENABLED", "SECURITY_ID_DISABLED" ]
          }
        },
        "isSuspended" : {
          "type" : "boolean",
          "default" : false
        },
        "isResumed" : {
          "type" : "boolean",
          "default" : false
        },
        "isVoided" : {
          "type" : "boolean",
          "default" : false
        },
        "grandAmount" : {
          "$ref" : "#/definitions/MoneyInfo"
        },
        "tenderAmount" : {
          "$ref" : "#/definitions/MoneyInfo"
        },
        "tenderId" : {
          "type" : "string"
        },
        "touchPointType" : {
          "type" : "string"
        },
        "touchPointGroup" : {
          "type" : "string"
        },
        "linkedTransactionIds" : {
          "type" : "array",
          "items" : {
            "type" : "string"
          }
        },
        "dataProviderName" : {
          "type" : "string"
        },
        "dataProviderVersion" : {
          "type" : "string"
        },
        "tenderType" : {
          "type" : "string",
          "enum" : [ "GENERIC", "CASH", "CREDIT_CARD", "DEBIT_CARD", "CASH_CARD", "GIFT_CARD", "GIFT_CERTIFICATE", "HOUSE_ACCOUNT", "PROPERTY_MANAGEMENT", "ACCOUNTS_RECEIVABLE", "ROOM_CHARGE", "SAVED_CUSTOMER", "CAMPUS_CARD", "MEAL_VOUCHER", "CHECK", "ELECTRONIC_BENEFIT_TRANSFER_CASH", "ELECTRONIC_BENEFIT_TRANSFER_FOOD_STAMP", "DRIVE_OR_WALK_OFF", "MANUFACTURER_COUPON", "MONEY_ORDER", "FLEXIBLE_SPENDING_ACCOUNT", "LOCAL_ACCOUNT", "WIC_ELECTRONIC", "WIC_SMARTCARD", "TRAVELERS_CHECK", "LOYALTY_POINTS", "STORED_VALUE", "DONATION" ]
        },
        "sourceAccount" : {
          "type" : "string"
        },
        "destinationAccount" : {
          "type" : "string"
        },
        "productIds" : {
          "type" : "array",
          "items" : {
            "type" : "string"
          }
        },
        "isReturn" : {
          "type" : "boolean",
          "default" : false
        },
        "isReturnAffectsInventory" : {
          "type" : "boolean",
          "default" : false
        },
        "isItemVoided" : {
          "type" : "boolean",
          "default" : false
        },
        "regularUnitPrice" : {
          "$ref" : "#/definitions/MoneyInfo"
        },
        "actualUnitPrice" : {
          "$ref" : "#/definitions/MoneyInfo"
        },
        "departmentIds" : {
          "type" : "array",
          "items" : {
            "type" : "string"
          }
        },
        "customerId" : {
          "type" : "string"
        },
        "customerEmail" : {
          "type" : "string"
        },
        "phoneNumber" : {
          "type" : "string"
        },
        "customerName" : {
          "type" : "string"
        },
        "loyaltyCardNumber" : {
          "type" : "string"
        },
        "itemPromotionId" : {
          "type" : "string"
        },
        "itemDiscountIds" : {
          "type" : "array",
          "items" : {
            "type" : "string"
          }
        },
        "discountId" : {
          "type" : "string"
        },
        "promotionIds" : {
          "type" : "array",
          "items" : {
            "type" : "string"
          }
        },
        "couponIds" : {
          "type" : "array",
          "items" : {
            "type" : "string"
          }
        }
      }
    },
    "ZoneOffset" : {
      "type" : "object",
      "properties" : {
        "totalSeconds" : {
          "type" : "integer",
          "format" : "int32"
        },
        "id" : {
          "type" : "string"
        },
        "rules" : {
          "$ref" : "#/definitions/ZoneRules"
        }
      }
    },
    "TLogHbaseEntity" : {
      "type" : "object",
      "properties" : {
        "canonicalTLogJson" : {
          "type" : "string"
        },
        "channel" : {
          "type" : "string"
        },
        "format" : {
          "type" : "string"
        },
        "id" : {
          "type" : "string"
        },
        "rawTLog" : {
          "type" : "string"
        }
      }
    },
    "AuditStatus" : {
      "type" : "object",
      "properties" : {
        "correlationId" : {
          "type" : "string"
        },
        "tlogId" : {
          "type" : "string"
        },
        "uploadDateTime" : {
          "type" : "string",
          "format" : "date-time"
        },
        "status" : {
          "type" : "string"
        },
        "message" : {
          "type" : "string"
        }
      }
    },
    "FindWithQueryResponse" : {
      "type" : "object",
      "properties" : {
        "lastPage" : {
          "type" : "boolean",
          "default" : false
        },
        "pageNumber" : {
          "type" : "integer",
          "format" : "int32"
        },
        "totalPages" : {
          "type" : "integer",
          "format" : "int64",
          "minimum" : 0.0
        },
        "totalResults" : {
          "type" : "integer",
          "format" : "int64",
          "minimum" : 0.0
        },
        "pageContent" : {
          "type" : "array",
          "items" : {
            "$ref" : "#/definitions/TLogInfo"
          }
        }
      }
    },
    "LinkedCanonicalTLogResponse" : {
      "type" : "object",
      "properties" : {
        "lastPage" : {
          "type" : "boolean",
          "default" : false
        },
        "pageNumber" : {
          "type" : "integer",
          "format" : "int32"
        },
        "totalPages" : {
          "type" : "integer",
          "format" : "int64",
          "minimum" : 0.0
        },
        "totalResults" : {
          "type" : "integer",
          "format" : "int64",
          "minimum" : 0.0
        },
        "pageContent" : {
          "type" : "array",
          "items" : {
            "$ref" : "#/definitions/CanonicalTLogDataObject"
          }
        }
      }
    },
    "ZoneRules" : {
      "type" : "object",
      "properties" : {
        "transitions" : {
          "type" : "array",
          "items" : {
            "$ref" : "#/definitions/ZoneOffsetTransition"
          }
        },
        "transitionRules" : {
          "type" : "array",
          "items" : {
            "$ref" : "#/definitions/ZoneOffsetTransitionRule"
          }
        },
        "fixedOffset" : {
          "type" : "boolean",
          "default" : false
        }
      }
    },
    "ZoneOffsetTransition" : {
      "type" : "object",
      "properties" : {
        "offsetBefore" : {
          "$ref" : "#/definitions/ZoneOffset"
        },
        "offsetAfter" : {
          "$ref" : "#/definitions/ZoneOffset"
        },
        "dateTimeBefore" : {
          "type" : "string",
          "format" : "date-time"
        },
        "instant" : {
          "type" : "integer",
          "format" : "int64"
        },
        "duration" : {
          "type" : "string",
          "format" : "duration",
          "description" : "ISO-8601 time-based time representation, such as 'PT24H' or 'PT8H6M12.345S"
        },
        "gap" : {
          "type" : "boolean",
          "default" : false
        },
        "overlap" : {
          "type" : "boolean",
          "default" : false
        },
        "dateTimeAfter" : {
          "type" : "string",
          "format" : "date-time"
        }
      }
    },
    "KeyValueData" : {
      "type" : "object",
      "properties" : {
        "key" : {
          "type" : "string"
        },
        "value" : {
          "type" : "object",
          "properties" : { }
        }
      }
    }
  }
}